\section{Organisation d'un projet}

\begin{frame}
	\begin{center}
		\huge
		Organisation d'un projet
	\end{center}
\end{frame}

\subsection{Les modules} %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
	\frametitle{Principe des modules}
	\begin{center}
		\includegraphics[width=9cm]{pics/modules.png}
	\end{center}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Utilisation de fonctions d'un module}
	\begin{center}
		\begin{minipage}{0.5\textwidth}
			\begin{lstlisting}
open List

length 
  (1::3::3::7::[])
			\end{lstlisting}
		\end{minipage}
		\begin{minipage}{0.4\textwidth}
			\begin{lstlisting}
List.length 
  (1::3::3::7::[])
			\end{lstlisting}
		\end{minipage}
	\end{center}
\end{frame}

\begin{frame}
	\frametitle{Une facon de creer un module : Un fichier...}
	\begin{center}
		\begin{minipage}{0.5\textwidth}
			main.ml\\
			processing.ml\\
			rotation.ml\\
			cutting.ml\\
			recongition.ml
		\end{minipage}
		\begin{minipage}{0.4\textwidth}
			processing.mli\\
			rotation.mli\\
			cutting.mli\\
			recongition.mli
		\end{minipage}
	\end{center}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Les fichiers surface}
	\begin{center}
		\begin{minipage}{0.34\textwidth}
			someFunctions.ml
			\begin{lstlisting}
let add a b = 
  a + b

let addf a b = 
  a +. b

let sub a b = 
  a - b

let subf a b = 
  a -. b
			\end{lstlisting}
		\end{minipage}
		\begin{minipage}{0.5\textwidth}
			someFunctions.mli
			\begin{lstlisting}
val add : 
  int -> int -> int

val addf : 
  float -> float -> float

val sub :
  int -> int -> int

val subf :
  float -> float -> float
			\end{lstlisting}
		\end{minipage}
	\end{center}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Syntaxe d'un fichier interface 1/3}
	\lstset{basicstyle=\small}
	\begin{lstlisting}
val f : int -> int -> int

exception badSurface of (int -> int) * int

type card =
| Ace
| Number of int
| Head of HeadCard

type coloredPoint = {
  pos : int * int;
  mutable color;
}
	\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Syntaxe d'un fichier interface 2/3}
	\lstset{basicstyle=\small}
	\begin{lstlisting}
class counter :
  object
    val mutable i : int
    method getCounts : unit -> int
  end

class point :
  int * int -> 
    object
      val pos : int * int
      method printCoord : unit -> unit
    end
	\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Syntaxe d'un fichier interface 3/3}
	\lstset{basicstyle=\small}
	\begin{lstlisting}
class ['a] storage = 
  object 
    val mutable data : 'a list
    method addData : 'a -> unit 
  end
	\end{lstlisting}
\end{frame}

\subsection{La compilation avec ocamlbuild} %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[fragile]
	\frametitle{Les differentes sorties d'OCaml}
	\huge
	\begin{itemize}
		\item ocaml : Interprète à la volé
		\item ocamlc : Production de byte-code
		\item ocamlopt : Compilation native
	\end{itemize}
	\normalsize
\end{frame}

\begin{frame}
	\frametitle{Un Makefile \textit{usine à gaz}}
	\begin{center}
		\includegraphics[width=10cm]{pics/mkfile.png}
	\end{center}
\end{frame}

\begin{frame}[fragile]
	\frametitle{ocamlbuild}
	\begin{lstlisting}
ocamlbuild -use-ocamlfind\
-pkgs [library] [mainFile].[byte/native]

ocamlbuild -use-ocamlfind -pkgs\
lua,expat,sdl,sdl.sdlimage,sdl.sdlttf,str\
main.native
	\end{lstlisting}
\end{frame}

\subsection{Faire de la documentation} %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}
	\frametitle{La documentation}
	\begin{center}
		\includegraphics[width=10cm]{pics/doc.png}
	\end{center}
\end{frame}

\begin{frame}[fragile]
	\frametitle{ocamldoc via ocamlbuild}
	\begin{center}
		\begin{minipage}{0.32\textwidth}
			previousEx.odocl
			\begin{lstlisting}
  Main
  Processing
  Rotation
  Cutting
  Recongition
			\end{lstlisting}
		\end{minipage}
		\begin{minipage}{0.6\textwidth}
			\begin{lstlisting}
camlbuild \
previousEx.docdir/index.html
			\end{lstlisting}
		\end{minipage}
	\end{center}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Les commentaires de ocamldoc 1/2}
	\lstset{basicstyle=\scriptsize}	
	\begin{lstlisting}
(** The first special comment of the file is the 
    comment associated with the whole module.*)

(******************************************************)
(** Comments like the one above, with more than two 
    asterisks, are ignored. *)

(** The comment for function f. *)
val f : int -> int -> int
(** The continuation of the comment for function f. *)


(** Comment for type weather  *)
type weather =
| Rain of int (** The comment for construtor Rain *)
| Sun (** The comment for constructor Sun *)
	\end{lstlisting}
\end{frame}

\begin{frame}[fragile]
	\frametitle{Les commentaires de ocamldoc 2/2}
	\lstset{basicstyle=\scriptsize}	
	\begin{lstlisting}
(** The comment for class my_class *)
class my_class :
  object
    (** A comment to describe inheritance from cl *)
    inherit cl

    (** The comment for attribute tutu *)
    val mutable tutu : string

    (** The comment for attribute toto. *)
    val toto : int

    (** This comment is not attached to titi since
        there is a blank line before titi, but is kept
        as a comment in the class. *)

    val titi : string

    (** Comment for method toto *)
    method toto : string

    (** Comment for method m *)
    method m : float -> int
  end
	\end{lstlisting}
\end{frame}

